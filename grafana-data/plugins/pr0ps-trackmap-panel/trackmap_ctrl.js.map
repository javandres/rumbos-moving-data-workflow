{"version":3,"file":"trackmap_ctrl.js","names":["log","msg","getAntimeridianMidpoints","start","end","Math","abs","lng","start_dist_to_antimeridian","end_dist_to_antimeridian","lat_difference","lat","alpha_angle","atan","PI","lat_diff_at_antimeridian","tan","intersection_lat","first_line_end","second_line_start","L","latLng","moment","DataHoverClearEvent","DataHoverEvent","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","MetricsPanelCtrl","TrackMapCtrl","$scope","$injector","_","defaults","panel","maxDataPoints","autoZoom","scrollWheelZoom","defaultLayer","showLayerChanger","lineColor","pointColor","layers","tileLayer","attribution","maxZoom","forcedOverlay","subdomains","tms","timeSrv","get","coords","coordSlices","leafMap","layerChanger","polylines","hoverMarker","hoverTarget","setSizePromise","events","on","onInitialized","bind","onInitEditMode","onPanelTeardown","onDataReceived","onDataSnapshotLoad","onRender","onRefresh","dashboard","type","onPanelHover","onPanelClear","err","onPanelSizeChanged","eachLayer","l","GridLayer","isLoading","once","renderingCompleted","render","addEditorTab","$timeout","cancel","evt","target","hasOwnProperty","pos","x","floor","point","time","length","addTo","min","max","idx","exact","timestamp","setLatLng","position","removeFrom","map","invalidateSize","enabled","disable","enable","hadMap","Boolean","setupMap","layer","removeControl","addControl","addDataToMap","forEach","p","id","zoomSnap","zoomDelta","control","circleMarker","color","fillColor","fillOpacity","weight","radius","mapBaseLayerChange","mapZoomToBox","e","overlay","options","setZIndex","zIndex","bounds","reduce","t","c","boxZoomBounds","contains","from","to","Infinity","isFinite","setTime","utc","i","coordSlice","slice","push","polyline","zoomToFit","getBounds","extend","isValid","fitBounds","setView","setStyle","data","lats","datapoints","lons","midpoints","lastTime","snapshotData","templateUrl"],"sources":["../src/trackmap_ctrl.js"],"sourcesContent":["import L from './leaflet/leaflet.js';\nimport moment from 'moment';\n\nimport { DataHoverClearEvent, DataHoverEvent, LegacyGraphHoverClearEvent, LegacyGraphHoverEvent } from '@grafana/data';\nimport {MetricsPanelCtrl} from 'app/plugins/sdk';\n\nimport './leaflet/leaflet.css!';\nimport './partials/module.css!';\n\n\nfunction log(msg) {\n  // uncomment for debugging\n  //console.log(msg);\n}\n\nfunction getAntimeridianMidpoints(start, end) {\n  // See https://stackoverflow.com/a/65870755/369977\n  if (Math.abs(start.lng - end.lng) <= 180.0){\n    return null;\n  }\n  const start_dist_to_antimeridian = start.lng > 0 ? 180 - start.lng : 180 + start.lng;\n  const end_dist_to_antimeridian = end.lng > 0 ? 180 - end.lng : 180 + end.lng;\n  const lat_difference = Math.abs(start.lat - end.lat);\n  const alpha_angle = Math.atan(lat_difference / (start_dist_to_antimeridian + end_dist_to_antimeridian)) * (180 / Math.PI) * (start.lng > 0 ? 1 : -1);\n  const lat_diff_at_antimeridian = Math.tan(alpha_angle * Math.PI / 180) * start_dist_to_antimeridian;\n  const intersection_lat = start.lat + lat_diff_at_antimeridian;\n  const first_line_end = [intersection_lat, start.lng > 0 ? 180 : -180];\n  const second_line_start = [intersection_lat, end.lng > 0 ? 180 : -180];\n\n  return [L.latLng(first_line_end), L.latLng(second_line_start)];\n}\n\nexport class TrackMapCtrl extends MetricsPanelCtrl {\n  constructor($scope, $injector) {\n    super($scope, $injector);\n\n    log(\"constructor\");\n\n    _.defaults(this.panel, {\n      maxDataPoints: 500,\n      autoZoom: true,\n      scrollWheelZoom: false,\n      defaultLayer: 'OpenStreetMap',\n      showLayerChanger: true,\n      lineColor: 'red',\n      pointColor: 'royalblue',\n    });\n\n    // Save layers globally in order to use them in options\n    this.layers = {\n      'OpenStreetMap': L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n        maxZoom: 19\n      }),\n      'OpenTopoMap': L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n        attribution: 'Map data: &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)',\n        maxZoom: 17\n      }),\n      'Satellite': L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n        attribution: 'Imagery &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',\n        // This map doesn't have labels so we force a label-only layer on top of it\n        forcedOverlay: L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-labels/{z}/{x}/{y}.png', {\n          attribution: 'Labels by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n          subdomains: 'abcd',\n          maxZoom: 20,\n        })\n      }),\n      'Eniro Seamap': L.tileLayer('https://{s}.eniro.com/geowebcache/service/tms1.0.0/nautical/{z}/{x}/{y}.png', {\n        subdomains: ['map01', 'map02', 'map03', 'map04'],\n        attribution: '&copy; Kort & Matrikelstyrelsen',\n        tms: true,\n        maxZoom: 17,\n      })\n    };\n\n    this.timeSrv = $injector.get('timeSrv');\n    this.coords = [];\n    this.coordSlices = [];\n    this.leafMap = null;\n    this.layerChanger = null;\n    this.polylines = [];\n    this.hoverMarker = null;\n    this.hoverTarget = null;\n    this.setSizePromise = null;\n\n    // Panel events\n    this.events.on('panel-initialized', this.onInitialized.bind(this));\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('panel-teardown', this.onPanelTeardown.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-snapshot-load', this.onDataSnapshotLoad.bind(this));\n    this.events.on('render', this.onRender.bind(this));\n    this.events.on('refresh', this.onRefresh.bind(this));\n\n    // Global events\n    this.dashboard.events.on(LegacyGraphHoverEvent.type, this.onPanelHover.bind(this), $scope);\n    this.dashboard.events.on(LegacyGraphHoverClearEvent.type, this.onPanelClear.bind(this), $scope);\n    try {\n      this.dashboard.events.on(DataHoverEvent.type, this.onPanelHover.bind(this), $scope);\n      this.dashboard.events.on(DataHoverClearEvent.type, this.onPanelClear.bind(this), $scope);\n    } catch(err){ /* expected for Grafana v7.x.x */ }\n  }\n\n  onRefresh(){\n    log(\"onRefresh\")\n    this.onPanelSizeChanged();\n  }\n\n  onRender(){\n    log(\"onRender\")\n\n    // No specific event for panel size changing anymore\n    // Render is called when the size changes so just call it here\n    this.onPanelSizeChanged();\n\n    // Wait until there is at least one GridLayer with fully loaded\n    // tiles before calling renderingCompleted\n    if (this.leafMap) {\n      this.leafMap.eachLayer((l) => {\n        if (l instanceof L.GridLayer){\n          if (l.isLoading()) {\n            l.once('load', this.renderingCompleted.bind(this));\n          }\n          else {\n            this.renderingCompleted();\n          }\n        }\n      });\n    }\n  }\n\n  onInitialized(){\n    log(\"onInitialized\");\n    this.render();\n  }\n\n  onInitEditMode() {\n    log(\"onInitEditMode\");\n    this.addEditorTab('Options', 'public/plugins/pr0ps-trackmap-panel/partials/options.html', 2);\n  }\n\n  onPanelTeardown() {\n    log(\"onPanelTeardown\");\n    this.$timeout.cancel(this.setSizePromise);\n  }\n\n  onPanelHover(evt) {\n    log(\"onPanelHover\");\n\n    let target = 0;\n    // Check if event has position (Legacy Hover event) or point (Data Hover event)\n    if (evt.hasOwnProperty('pos')) {\n      if (evt.pos?.x == null) {\n        return;\n      }\n      target = Math.floor(evt.pos.x);\n    } else {\n      if (evt.point?.time == null) {\n        return\n      }\n      target = Math.floor(evt.point.time);\n    }\n\n    if (this.coords.length === 0) {\n      return;\n    }\n\n    // check if we are already showing the correct hoverMarker\n    if (this.hoverTarget && this.hoverTarget === target) {\n      return;\n    }\n\n    // check for initial show of the marker\n    if (this.hoverTarget == null){\n      this.hoverMarker.addTo(this.leafMap);\n    }\n\n    this.hoverTarget = target;\n\n    // Find the currently selected time and move the hoverMarker to it\n    // Note that an exact match isn't always going to work due to rounding so\n    // we clean that up later (still more efficient)\n    let min = 0;\n    let max = this.coords.length - 1;\n    let idx = null;\n    let exact = false;\n    while (min <= max) {\n      idx = Math.floor((max + min) / 2);\n      if (this.coords[idx].timestamp === this.hoverTarget) {\n        exact = true;\n        break;\n      }\n      else if (this.coords[idx].timestamp < this.hoverTarget) {\n        min = idx + 1;\n      }\n      else {\n        max = idx - 1;\n      }\n    }\n\n    // Correct the case where we are +1 index off\n    if (!exact && idx > 0 && this.coords[idx].timestamp > this.hoverTarget) {\n      idx--;\n    }\n    this.hoverMarker.setLatLng(this.coords[idx].position);\n    this.render();\n  }\n\n  onPanelClear(evt) {\n    log(\"onPanelClear\");\n    // clear the highlighted circle\n    this.hoverTarget = null;\n    if (this.hoverMarker) {\n      this.hoverMarker.removeFrom(this.leafMap);\n    }\n  }\n\n  onPanelSizeChanged() {\n    log(\"onPanelSizeChanged\");\n    // KLUDGE: This event is fired too soon - we need to delay doing the actual\n    //         size invalidation until after the panel has actually been resized.\n    this.$timeout.cancel(this.setSizePromise);\n    let map = this.leafMap;\n    this.setSizePromise = this.$timeout(function(){\n      if (map) {\n        log(\"Invalidating map size\");\n        map.invalidateSize(true);\n      }}, 500\n    );\n  }\n\n  applyScrollZoom() {\n    let enabled = this.leafMap.scrollWheelZoom.enabled();\n    if (enabled != this.panel.scrollWheelZoom){\n      if (enabled){\n        this.leafMap.scrollWheelZoom.disable();\n      }\n      else{\n        this.leafMap.scrollWheelZoom.enable();\n      }\n    }\n  }\n\n  applyDefaultLayer() {\n    let hadMap = Boolean(this.leafMap);\n    this.setupMap();\n    if (hadMap){\n      // Re-add the default layer\n      this.leafMap.eachLayer((layer) => {\n        layer.removeFrom(this.leafMap);\n      });\n      this.layers[this.panel.defaultLayer].addTo(this.leafMap);\n\n      // Hide/show the layer switcher\n      this.leafMap.removeControl(this.layerChanger)\n      if (this.panel.showLayerChanger){\n        this.leafMap.addControl(this.layerChanger);\n      }\n    }\n    this.addDataToMap();\n  }\n\n  setupMap() {\n    log(\"setupMap\");\n    // Create the map or get it back in a clean state if it already exists\n    if (this.leafMap) {\n      this.polylines.forEach(p=>p.removeFrom(this.leafMap));\n      this.onPanelClear();\n      return;\n    }\n\n    // Create the map\n    this.leafMap = L.map('trackmap-' + this.panel.id, {\n      scrollWheelZoom: this.panel.scrollWheelZoom,\n      zoomSnap: 0.5,\n      zoomDelta: 1,\n    });\n\n    // Create the layer changer\n    this.layerChanger = L.control.layers(this.layers)\n\n    // Add layers to the control widget\n    if (this.panel.showLayerChanger){\n      this.leafMap.addControl(this.layerChanger);\n    }\n\n    // Add default layer to map\n    this.layers[this.panel.defaultLayer].addTo(this.leafMap);\n\n    // Hover marker\n    this.hoverMarker = L.circleMarker(L.latLng(0, 0), {\n      color: 'white',\n      fillColor: this.panel.pointColor,\n      fillOpacity: 1,\n      weight: 2,\n      radius: 7\n    });\n\n    // Events\n    this.leafMap.on('baselayerchange', this.mapBaseLayerChange.bind(this));\n    this.leafMap.on('boxzoomend', this.mapZoomToBox.bind(this));\n  }\n\n  mapBaseLayerChange(e) {\n    // If a tileLayer has a 'forcedOverlay' attribute, always enable/disable it\n    // along with the layer\n    if (this.leafMap.forcedOverlay) {\n      this.leafMap.forcedOverlay.removeFrom(this.leafMap);\n      this.leafMap.forcedOverlay = null;\n    }\n    let overlay = e.layer.options.forcedOverlay;\n    if (overlay) {\n      overlay.addTo(this.leafMap);\n      overlay.setZIndex(e.layer.options.zIndex + 1);\n      this.leafMap.forcedOverlay = overlay;\n    }\n  }\n\n  mapZoomToBox(e) {\n    log(\"mapZoomToBox\");\n    // Find time bounds of selected coordinates\n    const bounds = this.coords.reduce(\n      function(t, c) {\n        if (e.boxZoomBounds.contains(c.position)) {\n          t.from = Math.min(t.from, c.timestamp);\n          t.to = Math.max(t.to, c.timestamp);\n        }\n        return t;\n      },\n      {from: Infinity, to: -Infinity}\n    );\n\n    // Set the global time range\n    if (isFinite(bounds.from) && isFinite(bounds.to)) {\n      // KLUDGE: Create moment objects here to avoid a TypeError that\n      //         occurs when Grafana processes normal numbers\n      this.timeSrv.setTime({\n        from: moment.utc(bounds.from),\n        to: moment.utc(bounds.to)\n      });\n    }\n    this.render();\n  }\n\n  // Add the circles and polyline(s) to the map\n  addDataToMap() {\n    log(\"addDataToMap\");\n\n    this.polylines.length = 0;\n    for (let i = 0; i < this.coordSlices.length - 1; i++) {\n      const coordSlice = this.coords.slice(this.coordSlices[i], this.coordSlices[i+1])\n      this.polylines.push(\n        L.polyline(\n          coordSlice.map(x => x.position, this), {\n            color: this.panel.lineColor,\n            weight: 3,\n          }\n        ).addTo(this.leafMap)\n      );\n    }\n    this.zoomToFit();\n  }\n\n  zoomToFit(){\n    log(\"zoomToFit\");\n    if (this.panel.autoZoom && this.polylines.length>0){\n      var bounds = this.polylines[0].getBounds();\n      this.polylines.forEach(p => bounds.extend(p.getBounds()));\n\n      if (bounds.isValid()){\n        this.leafMap.fitBounds(bounds);\n      }\n      else {\n        this.leafMap.setView([0, 0], 1);\n      }\n    }\n    this.render();\n  }\n\n  refreshColors() {\n    log(\"refreshColors\");\n    this.polylines.forEach(p => {\n      p.setStyle({\n        color: this.panel.lineColor\n      })\n    });\n    if (this.hoverMarker){\n      this.hoverMarker.setStyle({\n        fillColor: this.panel.pointColor,\n      });\n    }\n    this.render();\n  }\n\n  onDataReceived(data) {\n    log(\"onDataReceived\");\n    this.setupMap();\n\n    if (data.length === 0 || data.length !== 2) {\n      // No data or incorrect data, show a world map and abort\n      this.leafMap.setView([0, 0], 1);\n      this.render();\n      return;\n    }\n\n    // Asumption is that there are an equal number of properly matched timestamps\n    // TODO: proper joining by timestamp?\n    this.coords.length = 0;\n    this.coordSlices.length = 0;\n    this.coordSlices.push(0)\n    const lats = data[0].datapoints;\n    const lons = data[1].datapoints;\n    for (let i = 0; i < lats.length; i++) {\n      if (lats[i][0] == null || lons[i][0] == null ||\n          (lats[i][0] == 0 && lons[i][0] == 0) ||\n          lats[i][1] !== lons[i][1]) {\n        continue;\n      }\n      const pos = L.latLng(lats[i][0], lons[i][0])\n\n      if (this.coords.length > 0){\n        // Deal with the line between last point and this one crossing the antimeridian:\n        // Draw a line from the last point to the antimeridian and another from the anitimeridian\n        // to the current point.\n        const midpoints = getAntimeridianMidpoints(this.coords[this.coords.length-1].position, pos);\n        if (midpoints != null){\n          // Crossed the antimeridian, add the points to the coords array\n          const lastTime = this.coords[this.coords.length-1].timestamp\n          midpoints.forEach(p => {\n            this.coords.push({\n              position: p,\n              timestamp: lastTime + ((lats[i][1] - lastTime)/2)\n            })\n          });\n          // Note that we need to start drawing a new line between the added points\n          this.coordSlices.push(this.coords.length - 1)\n        }\n      }\n\n      this.coords.push({\n        position: pos,\n        timestamp: lats[i][1]\n      });\n\n    }\n    this.coordSlices.push(this.coords.length)\n    this.addDataToMap();\n  }\n\n  onDataSnapshotLoad(snapshotData) {\n    log(\"onSnapshotLoad\");\n    this.onDataReceived(snapshotData);\n  }\n}\n\nTrackMapCtrl.templateUrl = 'partials/module.html';\n"],"mappings":"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"}